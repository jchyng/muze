<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence" version="2.1">
    <!-- https://gist.github.com/jorgevs/218483e7ba854e8e6e23be18182b0381 -->
    <persistence-unit name="playDB-dev">
        <!--maven project에서는 없어도 인식되지만, gradle project에서는 인식이 잘 안되는 문제가 있어 직접 등록해줘야함-->
        <class>org.muze.domain.Actor</class>
        <class>org.muze.domain.Musical</class>
        <class>org.muze.domain.Casting</class>

        <properties>
            <!-- H2 데이터베이스 설정 -->
            <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
            <!-- Spring과 다르게 내장 DB를 사용할 수 없는 듯하여 로컬에 DB를 설치해서 접속-->
            <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://localhost/~/test"/>
            <property name="javax.persistence.jdbc.user" value="sa"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            <property name="hibernate.h2.console.enabled" value="true"/>

            <!-- Hibernate 설정 -->
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
            <property name="hibernate.id.new_generator_mappings" value="true" />
            <property name="hibernate.hbm2ddl.auto" value="create"/>
        </properties>
    </persistence-unit>

    <!-- 프로덕션 환경 (MySQL Database) -->
    <persistence-unit name="playDB-prod">
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <!-- MySQL 데이터베이스 설정 -->
            <property name="javax.persistence.jdbc.driver" value="com.mysql.cj.jdbc.Driver"/>
            <property name="javax.persistence.jdbc.url"
                      value="jdbc:mysql://${db.host}:${db.port}/${db.name}"/>
            <property name="javax.persistence.jdbc.user" value="${db.user}"/>
            <property name="javax.persistence.jdbc.password" value="${db.password}"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL8Dialect"/>
            <!-- JVM 환경변수 할당 방식으로 private 유지 => java -Ddb.host=localhost -Ddb.port=3306 -Ddb.name=mydb -Ddb.user=root -Ddb.password=secret -jar myapp.jar-->

            <!-- Hibernate 설정 -->
            <property name="hibernate.naming.strategy"
                      value=" org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl"/>
            <property name="hibernate.hbm2ddl.auto" value="validate"/>
        </properties>
    </persistence-unit>
</persistence>